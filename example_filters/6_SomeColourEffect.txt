// copy & paste into playground for testing

const WIDTH = getVideoWidth();
const HEIGHT = getVideoHeight();

function someColorEffect(src, dest){
    for (var x=0; x<WIDTH; x = x+1){
        for (var y=0; y<HEIGHT; y = y+1){
            var r = red_of(src[x][y]);
            var g = green_of(src[x][y]);
            var b = blue_of(src[x][y]);
            var max = r > b 
                        ? r > g ? r : g 
                        : b > g ? b : g;
            set_rgb(dest[x][y],
                r + 255 - max,
                g + 255 - max,
                b + 255 - max
                );
        }
    }
}

apply_filter(someColorEffect);


